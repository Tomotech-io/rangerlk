<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ranger.LK — Travel Sri Lanka • Tours, Safaris, Beaches & Culture</title>
  <meta name="description" content="Plan your Sri Lanka trip with Ranger.LK — custom itineraries, wildlife safaris, scenic trains, beaches, and cultural highlights. Local experts. Ethical travel." />
  <link rel="canonical" href="https://ranger.lk/" />
  <meta name="theme-color" content="#0b3b2e" />

  <!-- External CSS (relative paths; safe for file://) -->
  <link rel="preload" href="./src/css/base.css" as="style" />
  <link rel="stylesheet" href="./src/css/base.css" />
  <link rel="stylesheet" href="./src/css/layout.css" />
  <link rel="stylesheet" href="./src/css/pages/home.css" />

  <!-- Inline BUTTON styles (ensures buttons look correct even if external CSS is cached/missing) -->
  <style>
    :root{
      --btn-accent-1: var(--emerald, #1F7A3A);
      --btn-accent-2: var(--navy, #0F2B46);
      --btn-focus:    var(--saffron, #D18F00);
      --btn-r: 14px; --btn-py: .9rem; --btn-px: 1.15rem; --btn-gap: .55rem; --btn-weight: 720;
    }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn){
      -webkit-appearance:none; appearance:none; position:relative; isolation:isolate;
      display:inline-flex; align-items:center; justify-content:center; gap:var(--btn-gap);
      padding:var(--btn-py) var(--btn-px); border-radius:var(--btn-r);
      border:1px solid rgba(255,255,255,.14); color:#f4fffa; font-weight:var(--btn-weight);
      letter-spacing:.01em; line-height:1; text-decoration:none; cursor:pointer;
      background:
        radial-gradient(120% 140% at 50% 0%, rgba(255,255,255,.18) 0%, rgba(255,255,255,0) 60%),
        linear-gradient(135deg,
          color-mix(in oklab, var(--btn-accent-1) 92%, white 6%),
          color-mix(in oklab, var(--btn-accent-2) 96%, black 2%)
        );
      box-shadow: inset 0 1px 0 rgba(255,255,255,.28), 0 10px 24px rgba(16, 90, 78, .28), 0 2px 6px rgba(0,0,0,.28);
      backdrop-filter: blur(8px) saturate(140%); transform: translateZ(0);
      transition: transform .08s ease, box-shadow .2s ease, filter .2s ease, background-position .2s ease;
    }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn)::before{
      content:""; position:absolute; inset:-1px; border-radius:inherit; pointer-events:none;
      background: linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,0) 60%);
      mix-blend-mode: soft-light; opacity:.55;
    }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn)::after{
      content:""; position:absolute; top:-35%; left:-45%; width:40%; height:170%;
      background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.5) 45%, rgba(255,255,255,0) 100%);
      transform: translateX(-120%) rotate(15deg); pointer-events:none; filter: blur(2px);
      transition: transform .6s ease;
    }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn):hover::after{ transform: translateX(130%) rotate(15deg); }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn):hover{
      filter:brightness(1.06);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 14px 28px rgba(16, 90, 78, .34), 0 3px 10px rgba(0,0,0,.32);
    }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn):active{ transform:translateY(1px); box-shadow:
      inset 0 1px 0 rgba(255,255,255,.2), 0 8px 16px rgba(16, 90, 78, .28), 0 2px 6px rgba(0,0,0,.32); }
    :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn):focus-visible{
      outline:0; box-shadow: 0 0 0 3px color-mix(in oklab, var(--btn-focus) 65%, transparent),
      inset 0 1px 0 rgba(255,255,255,.28), 0 12px 26px rgba(16, 90, 78, .32);
    }
    .btn.sm{ padding:.65rem .9rem; border-radius:12px; font-weight:650; }
    .btn.lg{ padding:1.05rem 1.25rem; border-radius:16px; font-size:1.05rem; }
    .btn.block{ display:flex; width:100% }
    .btn[aria-disabled="true"], .btn:disabled{ cursor:not-allowed; opacity:.6; filter:saturate(.7) contrast(.95); transform:none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.18), 0 4px 10px rgba(0,0,0,.22); }
    a.btn[aria-disabled="true"]{ pointer-events:none }
    @media (prefers-reduced-motion: reduce){
      :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn){ transition:none }
      :where(a.btn,button.btn,input[type="button"].btn,input[type="submit"].btn)::after{ display:none }
    }
  </style>

  <!-- Social preview -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Ranger.LK — Travel Sri Lanka">
  <meta property="og:description" content="Custom tours & holidays in Sri Lanka: wildlife, beaches, hill country & culture.">
  <meta property="og:url" content="https://ranger.lk/">
  <meta property="og:image" content="./public/assets/og-cover.jpg">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Inline asset map -->
  <script id="ASSETS" type="application/json">
  {
    "logoMain": "./public/assets/img/logo.png",
    "logoFooter": "./public/assets/img/logo.png",
    "hero": "./public/assets/hero/hero-optimized.jpeg",
    "destCulturalTriangle": "./public/assets/destinations/adventure-event.png",
    "destHill": "./public/assets/destinations/dest-hill.png",
    "destSouth": "./public/assets/destinations/dest-south.png",
    "destYala": "./public/assets/destinations/dest-yala.png",
    "destEast": "./public/assets/destinations/dest-east.jpg",
    "destKandy": "./public/assets/destinations/dest-kandy.png",
    "itin10": "./public/assets/itineraries/10d.png",
    "itin7": "./public/assets/itineraries/7d.png",
    "itin12": "./public/assets/itineraries/12d.png",
    "gal1": "./public/assets/gallery/1.png",
    "gal2": "./public/assets/gallery/2.png",
    "gal3": "./public/assets/gallery/3.jpeg",
    "gal4": "./public/assets/gallery/4.jpg",
    "gal5": "./public/assets/gallery/5.png",
    "gal6": "./public/assets/gallery/6.png"
  }
  </script>
</head>

<body data-whatsapp-number="94776771171">
  <a class="skip" href="#main" style="position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;">Skip to content</a>

  <!-- Header -->
  <header id="home" class="site-header">
    <div class="container nav" role="navigation" aria-label="Primary">
      <a href="#home" class="brand" aria-label="Ranger.LK home">
        <img data-asset="logoMain" alt="Ranger.LK logo" width="40" height="40" />
        <span>Ranger.LK</span>
      </a>
      <nav>
        <button id="menuBtn" aria-expanded="false" aria-controls="menu" aria-label="Open menu">☰</button>
        <div id="menu" class="menu" role="menu">
          <a role="menuitem" href="#destinations">Destinations</a>
          <a role="menuitem" href="#experiences">Experiences</a>
          <a role="menuitem" href="#itineraries">Itineraries</a>
          <a role="menuitem" href="#gallery">Gallery</a>
          <a role="menuitem" href="#design">Design my trip</a>
          <a role="menuitem" class="btn" href="#design">Start now</a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="ribbon" aria-hidden="true"></div>
    <img class="hero-img" data-asset="hero" alt="Ziplining through Sri Lanka's lush hills" loading="eager" decoding="async" fetchpriority="high">
    <div class="hero-inner">
      <div class="kicker">Sri Lanka • Travel • Holidays</div>
      <h1>Discover Sri Lanka — beaches, wildlife, tea country & culture</h1>
      <p>Crafted by local experts. From leopard safaris and scenic trains to UNESCO wonders and palm-fringed coasts. Travel better, travel responsibly.</p>
      <div class="hero-cta">
        <a class="btn" href="#destinations">Explore destinations</a>
        <a class="btn" href="#design">Design my trip</a>
      </div>
    </div>
  </section>

  <main id="main">
    <!-- Destinations -->
    <section id="destinations" class="section container">
      <p class="eyebrow">Top Places</p>
      <h2>Signature Sri Lanka destinations</h2>
      <div class="grid destinations">
        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destCulturalTriangle" alt="Sigiriya rock fortress at sunset"></div>
          <div class="body">
            <h3>Cultural Triangle</h3>
            <p>Sigiriya, Dambulla and Polonnaruwa — ancient capitals, cave temples and wildlife plains.</p>
            <div class="meta"><span class="tag">Heritage</span><span class="tag">Wildlife</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Cultural Triangle Highlights" href="#design">Design this trip</a></div>
        </article>

        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destHill" alt="Tea fields and a blue train in hill country"></div>
          <div class="body">
            <h3>Hill Country</h3>
            <p>Ella & Nuwara Eliya — misty tea trails, waterfalls and the island’s most scenic train ride.</p>
            <div class="meta"><span class="tag">Train</span><span class="tag">Hikes</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Hill Country Escape" href="#design">Design this trip</a></div>
        </article>

        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destSouth" alt="Galle fort walls and palm-lined coast"></div>
          <div class="body">
            <h3>South Coast</h3>
            <p>Galle, Mirissa, Hiriketiya — beaches, whale watching, surf and colonial lanes.</p>
            <div class="meta"><span class="tag">Beaches</span><span class="tag">Whales</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="South Coast Chill" href="#design">Design this trip</a></div>
        </article>

        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destYala" alt="Leopard in Yala National Park"></div>
          <div class="body">
            <h3>Yala & Wilpattu</h3>
            <p>Iconic national parks — leopards, elephants and diverse birdlife with ethical guiding.</p>
            <div class="meta"><span class="tag">Safari</span><span class="tag">Birding</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Leopard & Elephants Safari" href="#design">Design this trip</a></div>
        </article>

        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destEast" alt="Turquoise bay in Trincomalee"></div>
          <div class="body">
            <h3>East Coast</h3>
            <p>Trincomalee & Arugam Bay — calm bays (May–Sep), snorkelling and world-class surf.</p>
            <div class="meta"><span class="tag">Snorkel</span><span class="tag">Surf</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="East Coast Blue" href="#design">Design this trip</a></div>
        </article>

        <article class="card dest">
          <div class="media"><img loading="lazy" data-asset="destKandy" alt="Temple of the Tooth in Kandy"></div>
          <div class="body">
            <h3>Kandy & Knuckles</h3>
            <p>UNESCO heritage, cultural performances and ridge hikes with panoramic views.</p>
            <div class="meta"><span class="tag">Culture</span><span class="tag">Mountains</span></div>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Kandy & Knuckles Trails" href="#design">Design this trip</a></div>
        </article>
      </div>
    </section>

    <!-- Experiences -->
    <section id="experiences" class="section container">
      <p class="eyebrow">Experiences</p>
      <h2>What you can do in Sri Lanka</h2>
      <div class="grid xp-grid">
        <div class="xp"><div class="icon">🛤️</div><div><h3>Scenic train journeys</h3><p>Ride the famed Kandy–Ella line across tea valleys, viaducts and cloud forests.</p></div></div>
        <div class="xp"><div class="icon">🦁</div><div><h3>Wildlife safaris</h3><p>Seek leopards, elephants and sloth bears with conservation-minded rangers.</p></div></div>
        <div class="xp"><div class="icon">🏖️</div><div><h3>Beaches & water</h3><p>Snorkel Pigeon Island, watch blue whales in season, or simply unwind on golden sands.</p></div></div>
        <div class="xp"><div class="icon">🥾</div><div><h3>Hikes & tea trails</h3><p>From Little Adam’s Peak to Horton Plains, choose routes fit for your pace.</p></div></div>
        <div class="xp"><div class="icon">🕍</div><div><h3>Culture & festivals</h3><p>Witness Kandy Esala Perahera, explore temples, and learn village crafts.</p></div></div>
        <div class="xp"><div class="icon">🕊️</div><div><h3>Birdwatching</h3><p>Track island endemics with guides who know the calls and habitats.</p></div></div>
      </div>
    </section>

    <!-- Itineraries -->
    <section id="itineraries" class="section container">
      <p class="eyebrow">Sample Plans</p>
      <h2>Popular itineraries</h2>
      <div class="grid itins">
        <article class="card itin">
          <div class="media" style="padding:0"><img loading="lazy" data-asset="itin10" alt="Sunrise over hill country"></div>
          <div class="body">
            <h3>Classic Highlights • 10 Days</h3>
            <p>Cultural Triangle → Kandy → Ella (train) → Yala → South Coast. Balanced pace for first-timers.</p>
            <p class="tag" style="background:#fff6e0;border-color:#ffe2a9;color:#8a5b00;">Great for couples & families</p>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Classic Highlights 10D" href="#design">Design this trip</a></div>
        </article>
        <article class="card itin">
          <div class="media" style="padding:0"><img loading="lazy" data-asset="itin7" alt="Jeep safari in Yala"></div>
          <div class="body">
            <h3>Wildlife & Beaches • 7 Days</h3>
            <p>Wilpattu or Yala safaris, then relax on the south coast. Ideal Nov–Apr.</p>
            <p class="tag" style="background:#eef7ff;border-color:#cfe5ff;color:#0f2b46;">Easy pace</p>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Wildlife & Beaches 7D" href="#design">Design this trip</a></div>
        </article>
        <article class="card itin">
          <div class="media" style="padding:0"><img loading="lazy" data-asset="itin12" alt="Temple and lake in Kandy"></div>
          <div class="body">
            <h3>Culture & Hills • 12 Days</h3>
            <p>Deep-dive into heritage and tea country with added hikes and village stays.</p>
            <p class="tag" style="background:#efe5e5;border-color:#e6c2b8;color:#7A1E10;">Active travelers</p>
          </div>
          <div style="padding:0 1.25rem 1.25rem"><a class="btn" data-package="Culture & Hills 12D" href="#design">Design this trip</a></div>
        </article>
      </div>
    </section>

    <!-- Design My Trip -->
    <section id="design" class="section">
      <div class="container dmt">
        <p class="eyebrow">Design My Trip</p>
        <h2>Plan & book — send to WhatsApp</h2>
        <p class="helper">Select a package, pick your date and group size, add notes, then tap <em>Send to WhatsApp</em>. We’ll confirm availability and pricing.</p>

        <div class="dmt-grid">
          <!-- Form -->
          <form id="dmtForm" class="card" style="padding:1.25rem;">
            <div class="inline">
              <label>
                <span>Full name</span>
                <input required type="text" name="name" autocomplete="name" />
              </label>
              <label>
                <span>Email (optional)</span>
                <input type="email" name="email" autocomplete="email" />
              </label>
            </div>

            <div class="inline">
              <label>
                <span>Choose package</span>
                <select required name="package" id="packageSelect">
                  <option value="">Select a package…</option>
                  <option>Classic Highlights 10D</option>
                  <option>Wildlife & Beaches 7D</option>
                  <option>Culture & Hills 12D</option>
                  <option>Leopard & Elephants Safari</option>
                  <option>Hill Country Escape</option>
                  <option>South Coast Chill</option>
                  <option>Cultural Triangle Highlights</option>
                  <option>East Coast Blue</option>
                </select>
              </label>
              <label>
                <span>Group size</span>
                <select name="group">
                  <option>1</option>
                  <option>2</option>
                  <option>3–4</option>
                  <option>5–8</option>
                  <option>8+</option>
                </select>
              </label>
            </div>

            <div class="inline">
              <label>
                <span>Start date</span>
                <input required type="date" name="start" id="startDate" />
              </label>
              <label>
                <span>Nights</span>
                <input required type="number" name="nights" id="nights" min="1" max="60" value="7" />
              </label>
            </div>

            <label>
              <span>Notes</span>
              <textarea name="notes" placeholder="Must-see places, budget range, hotel style, dietary needs…"></textarea>
            </label>

            <div style="display:flex; gap:.75rem; align-items:center; margin-top:.5rem; flex-wrap:wrap;">
              <button class="btn" type="submit">Preview details</button>
              <button id="sendWA" class="btn" type="button" aria-disabled="true" disabled>Send to WhatsApp</button>
              <span class="helper">WhatsApp will open with your trip details pre-filled.</span>
            </div>
          </form>

          <!-- Live Summary -->
          <aside class="dmt-summary">
            <h3 style="margin-top:0; color:#fff;">Your trip summary</h3>
            <div class="row"><span>Package</span><strong id="sPkg">—</strong></div>
            <div class="row"><span>Dates</span><strong id="sDates">—</strong></div>
            <div class="row"><span>Group</span><strong id="sGroup">—</strong></div>
            <div class="row"><span>Nights</span><strong id="sNights">—</strong></div>
            <div class="row" style="align-items:start"><span>Notes</span><strong id="sNotes" style="max-width:60ch; text-align:right; font-weight:500; color:#e1efe9;">—</strong></div>
          </aside>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="section container">
      <p class="eyebrow">Guest Stories</p>
      <h2>What travelers say</h2>
      <div class="grid quotes">
        <div class="quote">
          <p>“Flawless planning and thoughtful guides. The train views and leopard sightings were unforgettable.”</p>
          <div class="who">— Mia R., Germany</div>
        </div>
        <div class="quote">
          <p>“Loved the balance: culture, beaches and time to just relax. We’ll be back for the east coast!”</p>
          <div class="who">— Jason T., Australia</div>
        </div>
      </div>
    </section>

    <!-- Gallery -->
    <section id="gallery" class="section container">
      <p class="eyebrow">Gallery</p>
      <h2>Inspiration</h2>
      <div class="gallery" aria-label="Photo gallery">
        <figure><img loading="lazy" data-asset="gal1" alt="Nine Arches Bridge with blue train" width="800" height="600"></figure>
        <figure><img loading="lazy" data-asset="gal2" alt="Galle lighthouse at golden hour" width="800" height="600"></figure>
        <figure><img loading="lazy" data-asset="gal3" alt="Snorkelling over coral reef" width="800" height="600"></figure>
        <figure><img loading="lazy" data-asset="gal4" alt="Leopard on a tree" width="800" height="600"></figure>
        <figure><img loading="lazy" data-asset="gal5" alt="Tea picker in emerald fields" width="800" height="600"></figure>
        <figure><img loading="lazy" data-asset="gal6" alt="Sigiriya from the water gardens" width="800" height="600"></figure>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="section container">
      <p class="eyebrow">FAQ</p>
      <h2>Good to know</h2>
      <details>
        <summary>When is the best time to visit?</summary>
        <p>Nov–Apr is best for the south & west coasts and hill country; May–Sep shines on the east coast. We tailor routes to seasons.</p>
      </details>
      <details>
        <summary>Can trips be customised?</summary>
        <p>Yes. Tell us your dates, budget and interests — we’ll craft a plan with transparent pricing and ethical partners.</p>
      </details>
      <details>
        <summary>Do you arrange visas and insurance?</summary>
        <p>We provide guidance on Sri Lanka’s ETA visa and recommend comprehensive travel insurance, but we don’t issue visas or policies.</p>
      </details>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <div class="brand" style="margin-bottom:.5rem;">
          <img data-asset="logoFooter" alt="Ranger.LK logo small" width="40" height="40" />
          <span>Ranger.LK</span>
        </div>
        <p>Custom tours & holidays across Sri Lanka. Local expertise, ethical partners, transparent pricing.</p>
      </div>
      <div>
        <h3>Explore</h3>
        <ul style="list-style:none; padding:0; margin:0; display:grid; gap:.35rem;">
          <li><a href="#destinations">Destinations</a></li>
          <li><a href="#experiences">Experiences</a></li>
          <li><a href="#itineraries">Itineraries</a></li>
          <li><a href="#gallery">Gallery</a></li>
        </ul>
      </div>
      <div>
        <h3>Company</h3>
        <ul style="list-style:none; padding:0; margin:0; display:grid; gap:.35rem;">
          <li><a href="#">About</a></li>
          <li><a href="#">Sustainability</a></li>
          <li><a href="#">Careers</a></li>
          <li><a href="#">Press</a></li>
        </ul>
      </div>
      <div>
        <h3>Legal</h3>
        <ul style="list-style:none; padding:0; margin:0; display:grid; gap:.35rem;">
          <li><a href="#">Terms</a></li>
          <li><a href="#">Privacy</a></li>
          <li><a href="#">Cookies</a></li>
        </ul>
      </div>
    </div>
    <div class="container copyright">
      <span>© <span id="year"></span> Ranger.LK. All rights reserved.</span>
    </div>
  </footer>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"Ranger.LK","url":"https://ranger.lk/","logo":"https://ranger.lk/assets/logo.png","sameAs":["https://www.instagram.com/ranger.lk/"]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebSite","url":"https://ranger.lk/","potentialAction":{"@type":"SearchAction","target":"https://ranger.lk/search?q={search_term_string}","query-input":"required name=search_term_string"}}
  </script>

  <!-- JS (inline, file:// friendly) -->
  <script type="module">
    // Hydrate <img data-asset="..."> using inline #ASSETS map
    (() => {
      let map = {};
      try { const el = document.getElementById('ASSETS'); if (el) map = JSON.parse(el.textContent || '{}'); } catch(_) {}
      document.querySelectorAll('img[data-asset]').forEach(img => {
        const key = img.getAttribute('data-asset'); if (key && map[key]) img.src = map[key];
      });
    })();

    // Mobile nav toggle + footer year
    const menuBtn = document.getElementById('menuBtn');
    const menu = document.getElementById('menu');
    menuBtn?.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      menuBtn.setAttribute('aria-expanded', String(open));
    });
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Design My Trip logic
    const form = document.getElementById('dmtForm');
    if (form) {
      const sPkg = document.getElementById('sPkg');
      const sDates = document.getElementById('sDates');
      const sGroup = document.getElementById('sGroup');
      const sNights = document.getElementById('sNights');
      const sNotes = document.getElementById('sNotes');
      const startDateEl = document.getElementById('startDate');
      const pkgSelect = document.getElementById('packageSelect');
      const sendWA = document.getElementById('sendWA');
      const WHATSAPP_NUMBER = document.body.dataset.whatsappNumber || '';

      const formatDate = (iso) => {
        if (!iso) return '';
        const d = new Date(iso + 'T00:00:00');
        return d.toLocaleDateString(undefined, { year:'numeric', month:'short', day:'2-digit' });
      };
      const addDays = (dateISO, days) => {
        const d = new Date(dateISO + 'T00:00:00');
        d.setDate(d.getDate() + Number(days));
        return d.toISOString().slice(0,10);
      };
      const updateSummary = () => {
        const fd = new FormData(form);
        const p = fd.get('package') || '—';
        const g = fd.get('group') || '—';
        const n = fd.get('nights') || '—';
        const s = fd.get('start');
        const e = s && n ? addDays(s, n) : '';
        sPkg.textContent = p; sGroup.textContent = g; sNights.textContent = n;
        sNotes.textContent = (fd.get('notes') || '—').toString();
        sDates.textContent = s ? `${formatDate(s)}${e ? ' → ' + formatDate(e) : ''}` : '—';
        const ready = fd.get('name') && fd.get('package') && fd.get('start') && fd.get('nights');
        sendWA.disabled = !ready; sendWA.setAttribute('aria-disabled', String(!ready));
      };
      form.addEventListener('input', updateSummary);
      form.addEventListener('change', updateSummary);
      form.addEventListener('submit', e => { e.preventDefault(); updateSummary(); });

      document.querySelectorAll('[data-package]')?.forEach(btn => {
        btn.addEventListener('click', () => {
          const val = btn.getAttribute('data-package');
          if (val && pkgSelect) { pkgSelect.value = val; updateSummary(); }
        });
      });

      sendWA?.addEventListener('click', () => {
        const fd = new FormData(form);
        const name = fd.get('name') || '';
        const email = fd.get('email') || '';
        const pack = fd.get('package') || '';
        const start = fd.get('start') || '';
        const nights = fd.get('nights') || '';
        const group = fd.get('group') || '';
        const notes = fd.get('notes') || '';
        const end = start && nights ? addDays(start, nights) : '';
        const msg = `Hello Ranger.LK,%0A%0AI'd like to design a trip:%0A• Name: ${encodeURIComponent(name)}%0A• Package: ${encodeURIComponent(pack)}%0A• Dates: ${encodeURIComponent(formatDate(start))}${end?` → ${encodeURIComponent(formatDate(end))}`:''}%0A• Nights: ${encodeURIComponent(nights)}%0A• Group: ${encodeURIComponent(group)}%0A• Email: ${encodeURIComponent(email)}%0A• Notes: ${encodeURIComponent(notes)}%0A%0A(Generated from website)`;
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
        window.open(url, '_blank', 'noopener');
      });

      const todayISO = new Date().toISOString().slice(0,10);
      if (startDateEl) startDateEl.min = todayISO;
    }
  </script>
</body>
</html>
